(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3396:function(e,t,r){Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,3881))},5956:function(e,t,r){"use strict";r.d(t,{I8:function(){return o},JU:function(){return u.JU},PL:function(){return u.PL},QT:function(){return u.QT},db:function(){return s},hJ:function(){return u.hJ},pl:function(){return u.pl}});var n=r(2848),u=r(4353),i=r(9271);let a=(0,n.ZF)({apiKey:"AIzaSyDdKApKZNEERKmPLfB8SxlGsJRTZV5ALvc",authDomain:"tutor-website-5528f.firebaseapp.com",projectId:"tutor-website-5528f",storageBucket:"tutor-website-5528f.appspot.com",messagingSenderId:"320690040214",appId:"1:320690040214:web:fde29b5326692c27e981b7",measurementId:"G-J0MZ8W9SSG"}),s=(0,u.ad)(a),o=(0,i.v0)(a)},3881:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return o},a:function(){return c}});var n=r(7437),u=r(2265),i=r(9271),a=r(5956);let s=(0,u.createContext)();function o(e){let{children:t}=e,[r,o]=(0,u.useState)(null),[c,l]=(0,u.useState)(!0),[d,f]=(0,u.useState)([]),[p,b]=(0,u.useState)({});(0,u.useEffect)(()=>{console.log("UserContext mount");let e=(0,i.Aj)(a.I8,async e=>{if(console.log("Auth state changed:",null==e?void 0:e.uid),e)try{let t=(0,a.JU)(a.db,"users",e.uid),r=await (0,a.QT)(t);if(r.exists()){let t=r.data();o({uid:e.uid,email:e.email,type:t.type})}}catch(e){console.error("Error fetching user data:",e)}else o(null);l(!1)});return()=>e()},[]);let h=async(e,t)=>{try{let r=await (0,i.e5)(a.I8,e,t),n=(0,a.JU)(a.db,"users",r.user.uid),u=(await (0,a.QT)(n)).data();return o({email:r.user.email,uid:r.user.uid,type:null==u?void 0:u.type}),f((null==u?void 0:u.availability)||[]),{success:!0,userData:u}}catch(e){return console.error("Error signing in:",e),{success:!1,error:e}}},v=async e=>{if(null==r?void 0:r.uid)try{let t=(0,a.JU)(a.db,"users",r.uid);await (0,a.pl)(t,{availability:e},{merge:!0}),f(e)}catch(e){throw console.error("Error updating availability:",e),e}},m=async()=>{let e={};return(await (0,a.PL)((0,a.hJ)(a.db,"users"))).forEach(t=>{e[t.data().email]=t.data()}),b(e),e};return(0,n.jsx)(s.Provider,{value:{user:r,setUser:o,loading:c,availability:d,updateAvailability:v,signIn:h,teacherList:p,fetchTeachers:m},children:t})}function c(){let e=(0,u.useContext)(s);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},2778:function(){}},function(e){e.O(0,[461,301,83,417,971,117,744],function(){return e(e.s=3396)}),_N_E=e.O()}]);