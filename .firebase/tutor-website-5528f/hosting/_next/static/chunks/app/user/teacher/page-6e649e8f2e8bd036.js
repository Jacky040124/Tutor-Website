(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{8913:function(e,t,s){Promise.resolve().then(s.bind(s,1468))},1468:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var i=s(7437),l=s(5956),a=s(2265),n=s(3881),r=s(662),o=s(3621);function d(e){let{setShowOverlay:t}=e,{user:s,updatePrice:l,updateNickname:r,updateDescription:o}=(0,n.a)(),[d,c]=(0,a.useState)(s.nickname),[u,m]=(0,a.useState)(s.description),[x,f]=(0,a.useState)(s.pricing),h=async e=>{e.preventDefault();try{await Promise.all([r(d),o(u),l(x)]),console.log("Profile updated successfully"),t(!1)}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile. Please try again.")}};return(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",children:(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,i.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Edit Profile"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nickname"}),(0,i.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,i.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),rows:4,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pricing ($ per hour)"}),(0,i.jsx)("input",{type:"number",value:x,onChange:e=>f(Number(e.target.value)),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]})]}),(0,i.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[(0,i.jsx)("button",{type:"button",onClick:h,className:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 sm:col-start-2",children:"Save"}),(0,i.jsx)("button",{type:"button",onClick:()=>{t(!1)},className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",children:"Cancel"})]})]})})})})}function c(){let{user:e,availability:t,updateAvailability:s}=(0,n.a)(),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!0),{loading:g}=(0,n.a)(),b=async(e,i,l)=>{if(window.confirm("Do you want to remove this time slot?"))try{let a=t.filter(t=>{let s=new Date(t.date.year,t.date.month-1,t.date.day).getDay();return!((0===s?7:s)===e&&t.startTime===i&&t.endTime===l)});console.log("Original availability:",t),console.log("Updated availability:",a),await s(a),console.log("Event removed successfully")}catch(e){console.error("Error removing event:",e),alert("Failed to remove event. Please try again.")}};return((0,a.useEffect)(()=>{let t=async()=>{if(null==e?void 0:e.uid)try{var t;let i=(0,l.JU)(l.db,"users",e.uid),a=await (0,l.QT)(i),n=(null===(t=a.data())||void 0===t?void 0:t.availability)||[];s(n)}catch(e){console.error("Error fetching availability:",e)}finally{h(!1)}};g||t()},[e,g]),g||f)?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Loading..."})}):e?(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{children:["Hi, ",e.nickname]}),(0,i.jsx)("h1",{children:"Who's ready to maximise shareholder value?"}),(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsx)(()=>(0,i.jsxs)("header",{className:"flex flex-none items-center justify-between border-b border-gray-200 px-6 py-4",children:[(0,i.jsx)("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:(0,i.jsxs)("time",{dateTime:"2022-01",children:[new Date().toLocaleString("default",{month:"long"})," ",new Date().getFullYear()]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:()=>x(!0),type:"button",className:"standard-button",children:"Profile"}),(0,i.jsx)("button",{onClick:()=>u(!0),type:"button",className:"standard-button",children:"Add event"})]})]}),{}),(0,i.jsx)(r.Z,{availability:t,handleClickEvent:b}),c&&(0,i.jsx)(o.Z,{setShowOverlay:u}),m&&(0,i.jsx)(d,{setShowOverlay:x})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Please sign in to access this page"})})}}},function(e){e.O(0,[461,301,83,417,662,971,117,744],function(){return e(e.s=8913)}),_N_E=e.O()}]);