(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{8913:function(e,s,i){Promise.resolve().then(i.bind(i,6048))},5956:function(e,s,i){"use strict";i.d(s,{I8:function(){return d},JU:function(){return l.JU},QT:function(){return l.QT},db:function(){return r},pl:function(){return l.pl}});var t=i(2848),l=i(4353),n=i(9271);let a=(0,t.ZF)({apiKey:"AIzaSyDdKApKZNEERKmPLfB8SxlGsJRTZV5ALvc",authDomain:"tutor-website-5528f.firebaseapp.com",projectId:"tutor-website-5528f",storageBucket:"tutor-website-5528f.appspot.com",messagingSenderId:"320690040214",appId:"1:320690040214:web:fde29b5326692c27e981b7",measurementId:"G-J0MZ8W9SSG"}),r=(0,l.ad)(a),d=(0,n.v0)(a)},6048:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return x}});var t=i(7437),l=i(5956),n=i(2265),a=i(3881);i(7738);var r=e=>{let{value:s,onChange:i}=e,[l,a]=(0,n.useState)(!1),[r,d]=(0,n.useState)([]);(0,n.useEffect)(()=>{d((()=>{let e=[],s=new Date;for(let i=0;i<7;i++){let t=new Date(s);t.setDate(s.getDate()+i),e.push({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),displayText:t.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})}return e})())},[]);let o=e=>{i({day:e.day,month:e.month,year:e.year,displayText:e.displayText}),a(!1)};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a(!l),className:"w-full text-left",children:s?s.displayText:"Select day"}),l&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded shadow-lg",children:r.map(e=>(0,t.jsx)("div",{onClick:()=>o(e),className:"px-4 py-2 cursor-pointer hover:bg-gray-100",children:e.displayText},"".concat(e.year,"-").concat(e.month,"-").concat(e.day)))})]})};let d=e=>{if(!e)return null;let[s,i]=e.split(":").map(Number);return s+i/60};function o(e){let{setShowOverlay:s,onEventAdded:i}=e,[o,c]=(0,n.useState)(null),[x,h]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[v,j]=(0,n.useState)([]),{user:f}=(0,a.a)();(0,n.useEffect)(()=>{(async()=>{if(null==f?void 0:f.uid){var e;let s=(0,l.JU)(l.db,"users",f.uid);j((null===(e=(await (0,l.QT)(s)).data())||void 0===e?void 0:e.availability)||[])}})()},[f]);let g=()=>{s(!1)},p=e=>{let{name:s,onChange:i,value:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"time",className:"block text-sm font-medium leading-6 text-gray-900",children:[" ",s," "]}),(0,t.jsxs)("select",{onChange:i,value:l,id:"time",name:"time",className:"mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{children:"Select Time"}),(0,t.jsx)("option",{children:"00:00"}),(0,t.jsx)("option",{children:"00:30"}),(0,t.jsx)("option",{children:"01:00"}),(0,t.jsx)("option",{children:"01:30"}),(0,t.jsx)("option",{children:"02:00"}),(0,t.jsx)("option",{children:"02:30"}),(0,t.jsx)("option",{children:"03:00"}),(0,t.jsx)("option",{children:"03:30"}),(0,t.jsx)("option",{children:"04:00"}),(0,t.jsx)("option",{children:"04:30"}),(0,t.jsx)("option",{children:"05:00"}),(0,t.jsx)("option",{children:"05:30"}),(0,t.jsx)("option",{children:"06:00"}),(0,t.jsx)("option",{children:"06:30"}),(0,t.jsx)("option",{children:"07:00"}),(0,t.jsx)("option",{children:"07:30"}),(0,t.jsx)("option",{children:"08:00"}),(0,t.jsx)("option",{children:"08:30"}),(0,t.jsx)("option",{children:"09:00"}),(0,t.jsx)("option",{children:"09:30"}),(0,t.jsx)("option",{children:"10:00"}),(0,t.jsx)("option",{children:"10:30"}),(0,t.jsx)("option",{children:"11:00"}),(0,t.jsx)("option",{children:"11:30"}),(0,t.jsx)("option",{children:"12:00"}),(0,t.jsx)("option",{children:"12:30"}),(0,t.jsx)("option",{children:"13:00"}),(0,t.jsx)("option",{children:"13:30"}),(0,t.jsx)("option",{children:"14:00"}),(0,t.jsx)("option",{children:"14:30"}),(0,t.jsx)("option",{children:"15:00"}),(0,t.jsx)("option",{children:"15:30"}),(0,t.jsx)("option",{children:"16:00"}),(0,t.jsx)("option",{children:"16:30"}),(0,t.jsx)("option",{children:"17:00"}),(0,t.jsx)("option",{children:"17:30"}),(0,t.jsx)("option",{children:"18:00"}),(0,t.jsx)("option",{children:"18:30"}),(0,t.jsx)("option",{children:"19:00"}),(0,t.jsx)("option",{children:"19:30"}),(0,t.jsx)("option",{children:"20:00"}),(0,t.jsx)("option",{children:"20:30"}),(0,t.jsx)("option",{children:"21:00"}),(0,t.jsx)("option",{children:"21:30"}),(0,t.jsx)("option",{children:"22:00"}),(0,t.jsx)("option",{children:"22:30"}),(0,t.jsx)("option",{children:"23:00"}),(0,t.jsx)("option",{children:"23:30"})]})]})},y=async e=>{e.preventDefault();let t=d(x),n=d(m);if(o&&x&&m){if(t>=n){alert("endTime Must be later than startTime");return}}else{console.error("Missing required fields:",{date:o,start:x,end:m}),alert("Please fill in all fields");return}let a={date:{year:o.year,month:o.month,day:o.day},startTime:t,endTime:n};for(let e=0;e<v.length;e++){let s=v[e];if(s.date.year===a.date.year&&s.date.month===a.date.month&&s.date.day===a.date.day&&(a.startTime>=s.startTime&&a.startTime<s.endTime||a.endTime>s.startTime&&a.endTime<=s.endTime||a.startTime<=s.startTime&&a.endTime>=s.endTime)){alert("This time slot overlaps with an existing event");return}}if(null==f?void 0:f.uid)try{let e=(0,l.JU)(l.db,"users",f.uid),t=[...v,a];await (0,l.pl)(e,{availability:t},{merge:!0}),j(t),i&&i(),s(!1)}catch(e){console.error("Error saving event:",e),alert("Error saving event. Please try again.")}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[(0,t.jsx)("div",{className:"fixed inset-0"}),(0,t.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,t.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,t.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,t.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,t.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"bg-indigo-700 px-4 py-6 sm:px-6 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-6 text-white",id:"slide-over-title",children:"New Event"}),(0,t.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,t.jsxs)("button",{onClick:g,type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,t.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"space-y-6 pb-5 pt-6",children:[(0,t.jsx)(r,{onChange:e=>{c(e)},value:o}),(0,t.jsx)(p,{onChange:e=>{h(e.target.value)},name:"Start Time",value:x}),(0,t.jsx)(p,{onChange:e=>{u(e.target.value)},name:"End Time",value:m})]})})})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:[(0,t.jsx)("button",{onClick:g,type:"button",className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:y,type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})})})})]})})}function c(){let{user:e}=(0,a.a)(),[s,i]=(0,n.useState)(null),[r,d]=(0,n.useState)(0);(0,n.useEffect)(()=>{(async()=>{if(e)try{var s;let t=await (0,l.QT)((0,l.JU)(l.db,"users",e.uid));(null==t?void 0:null===(s=t.data())||void 0===s?void 0:s.availability)&&(console.log("Fetched availability:",t.data().availability),i(t.data().availability))}catch(e){console.error("Error fetching availability:",e)}})()},[e,r]);let o=new Date().getDate(),c=e=>{let{day:s,startTime:i,endTime:l}=e,n=12*i+2;return console.log("day:"+s,"startTime:"+i,"endTime:"+l),(0,t.jsx)("li",{className:"relative mt-px hidden ".concat({1:"sm:col-start-1",2:"sm:col-start-2",3:"sm:col-start-3",4:"sm:col-start-4",5:"sm:col-start-5",6:"sm:col-start-6",7:"sm:col-start-7"}[s]," sm:flex"),style:{gridRow:"".concat(n," / span ").concat((l-i)*12)},children:(0,t.jsx)("a",{className:"group absolute inset-1 flex flex-col overflow-y-auto rounded-lg bg-green-100 p-2 text-xs leading-5 hover:bg-green-200",children:(0,t.jsx)("p",{className:"text-gray-500 group-hover:text-gray-700",children:(0,t.jsxs)("time",{dateTime:"2022-01-15T".concat(i,":00"),children:[i,":00"]})})})})};return(0,t.jsx)("div",{className:"flex h-full flex-col",children:(0,t.jsx)("div",{className:"isolate flex flex-auto flex-col overflow-auto bg-white",children:(0,t.jsxs)("div",{className:"flex max-w-full flex-none flex-col sm:max-w-none md:max-w-full",style:{width:"165%"},children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("button",{onClick:()=>{d(e=>e-1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous Week"}),(0,t.jsx)("button",{onClick:()=>{d(e=>e+1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next Week"})]}),(0,t.jsx)(()=>{let e=(e=>{let s=new Date(e);s.setDate(s.getDate()+7*r);let i=s.getDay(),t=s.getDate()-i+(0===i?-6:1);return new Date(s.setDate(t))})(new Date),s=[...Array(7)].map((s,i)=>{let t=new Date(e);return t.setDate(e.getDate()+i),t.getDate()});return(0,t.jsxs)("div",{className:"sticky top-0 z-30 flex-none bg-white shadow ring-1 ring-black ring-opacity-5 sm:pr-8",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 text-sm leading-6 text-gray-500 sm:hidden",children:["M","T","W","T","F","S","S"].map((e,i)=>(0,t.jsxs)("button",{type:"button",className:"flex flex-col items-center pb-3 pt-2",children:[e,(0,t.jsx)("span",{className:"mt-1 flex h-8 w-8 items-center justify-center font-semibold ".concat(s[i]===o?"rounded-full bg-indigo-600 text-white":"text-gray-900"),children:s[i]})]},i))}),(0,t.jsxs)("div",{className:"-mr-px hidden grid-cols-7 divide-x divide-gray-100 border-r border-gray-100 text-sm leading-6 text-gray-500 sm:grid",children:[(0,t.jsx)("div",{className:"col-end-1 w-14"}),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,i)=>(0,t.jsx)("div",{className:"flex items-center justify-center py-3",children:(0,t.jsxs)("span",{className:"flex items-baseline",children:[e,(0,t.jsx)("span",{className:"ml-1.5 ".concat(s[i]===o?"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 font-semibold text-white":"items-center justify-center font-semibold text-gray-900"),children:s[i]})]})},i))]})]})},{}),(0,t.jsxs)("div",{className:"flex flex-auto",children:[(0,t.jsx)("div",{className:"sticky left-0 z-10 w-14 flex-none bg-white ring-1 ring-gray-100"}),(0,t.jsxs)("div",{className:"grid flex-auto grid-cols-1 grid-rows-1",children:[(0,t.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 grid divide-y divide-gray-100",style:{gridTemplateRows:"repeat(48, minmax(3.5rem, 1fr))"},children:[(0,t.jsx)("div",{className:"row-end-1 h-7"}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"12AM"})," "]}),(0,t.jsx)("div",{children:" "}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"1AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"2AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"3AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"4AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"5AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"6AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"7AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"8AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"9AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"10AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"11AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"12PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"1PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"2PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"3PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"4PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"5PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"6PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"7PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"8PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"9PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"10PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"11PM"})," "]}),(0,t.jsx)("div",{})]}),(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 hidden grid-cols-7 grid-rows-1 divide-x divide-gray-100 sm:grid sm:grid-cols-7",children:[(0,t.jsx)("div",{className:"col-start-1 row-span-full"}),(0,t.jsx)("div",{className:"col-start-2 row-span-full"}),(0,t.jsx)("div",{className:"col-start-3 row-span-full"}),(0,t.jsx)("div",{className:"col-start-4 row-span-full"}),(0,t.jsx)("div",{className:"col-start-5 row-span-full"}),(0,t.jsx)("div",{className:"col-start-6 row-span-full"}),(0,t.jsx)("div",{className:"col-start-7 row-span-full"}),(0,t.jsx)("div",{className:"col-start-8 row-span-full w-8"})]}),{}),(0,t.jsx)(()=>{if(!s)return null;let{monday:e,sunday:i}=(()=>{let e=new Date;e.setDate(e.getDate()+7*r);let s=new Date(e),i=s.getDay();s.setDate(s.getDate()+(0===i?-6:1-i));let t=new Date(s);return t.setDate(s.getDate()+6),console.log("Week bounds:",{monday:s.toDateString(),sunday:t.toDateString(),weekOffset:r}),{monday:s,sunday:t}})(),l=s.map((s,l)=>{var n,a,r;if(!(null==s?void 0:null===(n=s.date)||void 0===n?void 0:n.year)||!(null==s?void 0:null===(a=s.date)||void 0===a?void 0:a.month)||!(null==s?void 0:null===(r=s.date)||void 0===r?void 0:r.day))return console.error("Invalid event date format:",s),null;let d=new Date(s.date.year,s.date.month-1,s.date.day);d.setHours(0,0,0,0);let o=new Date(e);o.setHours(0,0,0,0);let x=new Date(i);if(x.setHours(0,0,0,0),d>=o&&d<=x){let e=d.getDay();return(0,t.jsx)(c,{day:0===e?7:e,endTime:s.endTime,startTime:s.startTime},l)}return null}).filter(Boolean);return(0,t.jsx)("ol",{className:"col-start-1 col-end-2 row-start-1 grid grid-cols-1 sm:grid-cols-7 sm:pr-8",style:{gridTemplateRows:"1.75rem repeat(288, minmax(0, 1fr)) auto"},children:l})},{})]})]})]})})})}function x(){let{user:e,loading:s}=(0,a.a)(),[i,r]=(0,n.useState)(!1),[d,x]=(0,n.useState)(!0),[h,m]=(0,n.useState)([]);return((0,n.useEffect)(()=>{let i=async()=>{if(null==e?void 0:e.uid)try{var s;let i=(0,l.JU)(l.db,"users",e.uid),t=await (0,l.QT)(i),n=(null===(s=t.data())||void 0===s?void 0:s.availability)||[];m(n)}catch(e){console.error("Error fetching availability:",e)}finally{x(!1)}};s||i()},[e,s]),s||d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-lg",children:"Loading..."})}):e?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{children:["Hi, ",null==e?void 0:e.uid]}),(0,t.jsx)("h1",{children:"Who's ready to maximise shareholder value?"}),(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("header",{className:"flex flex-none items-center justify-between border-b border-gray-200 px-6 py-4",children:[(0,t.jsx)("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:(0,t.jsxs)("time",{dateTime:"2022-01",children:[new Date().toLocaleString("default",{month:"long"})," ",new Date().getFullYear()]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{onClick:function(){},type:"button",className:"ml-6 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",children:"Remove event"}),(0,t.jsx)("button",{onClick:()=>r(!0),type:"button",className:"ml-6 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500",children:"Add event"})]})]}),(0,t.jsx)(c,{setShowOverlay:r}),i&&(0,t.jsx)(o,{setShowOverlay:r})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-lg",children:"Please sign in to access this page"})})}},3881:function(e,s,i){"use strict";i.d(s,{UserProvider:function(){return d},a:function(){return o}});var t=i(7437),l=i(2265),n=i(5956),a=i(9271);let r=(0,l.createContext)();function d(e){let{children:s}=e,[i,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,a.Aj)(n.I8,e=>{e?d({email:e.email,uid:e.uid}):d(null),c(!1)});return()=>e()},[]),(0,t.jsx)(r.Provider,{value:{user:i,setUser:d,loading:o},children:s})}function o(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},7738:function(){}},function(e){e.O(0,[263,301,83,417,971,117,744],function(){return e(e.s=8913)}),_N_E=e.O()}]);