(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{259:function(e,t,s){Promise.resolve().then(s.bind(s,2888))},2888:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var i=s(7437),a=s(4353),l=s(8858),n=s(2265),r=s(4693),o=s(195),d=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1),[r,o]=(0,n.useState)([]);(0,n.useEffect)(()=>{o((()=>{let e=[],t=new Date;for(let s=0;s<7;s++){let i=new Date(t);i.setDate(t.getDate()+s),e.push({day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear(),displayText:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})}return e})())},[]);let d=e=>{s({day:e.day,month:e.month,year:e.year,displayText:e.displayText}),l(!1)};return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("button",{type:"button",onClick:()=>l(!a),className:"w-full text-left",children:t?t.displayText:"Select day"}),a&&(0,i.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded shadow-lg",children:r.map(e=>(0,i.jsx)("div",{onClick:()=>d(e),className:"px-4 py-2 cursor-pointer hover:bg-gray-100",children:e.displayText},"".concat(e.year,"-").concat(e.month,"-").concat(e.day)))})]})},c=s(2894),m=s(3373);let u=()=>{let e=[];e.push((0,i.jsx)("option",{children:"Select Time"},"default"));for(let t=0;t<24;t++){let s=t.toString().padStart(2,"0");e.push((0,i.jsxs)("option",{children:[s,":00"]},"".concat(s,":00"))),e.push((0,i.jsxs)("option",{children:[s,":30"]},"".concat(s,":30")))}return e};function x(e){let{setShowOverlay:t,onEventAdded:s}=e,[a,l]=(0,n.useState)(null),[o,x]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),{user:g,availability:y,updateAvailability:v}=(0,r.a)(),[b,p]=(0,n.useState)(""),j=()=>{t(!1)},w=e=>{let{name:t,onChange:s,value:a}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"time",className:"block text-sm font-medium leading-6 text-gray-900",children:[" ",t," "]}),(0,i.jsx)("select",{onChange:s,value:a,id:"time",name:"time",className:"mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:u()})]})},N=(e,t)=>{for(let s=0;s<e.length;s++){let i=e[s];if(i.date.year===t.date.year&&i.date.month===t.date.month&&i.date.day===t.date.day&&(t.startTime>=i.startTime&&t.startTime<i.endTime||t.endTime>i.startTime&&t.endTime<=i.endTime||t.startTime<=i.startTime&&t.endTime>=i.endTime))return!0}return!1},k=async e=>{if(null==g?void 0:g.uid)try{let i=[...y,e];await v(i),s&&s(),t(!1)}catch(e){throw console.error("Error saving event:",e),p("Error saving event: ".concat(e.message)),e}},T=async e=>{e.preventDefault();let t=(0,m.bc)(o),s=(0,m.bc)(h);if(a&&o&&h){if(t>=s){p("End time must be later than start time");return}}else{p("Please fill in all fields");return}let i={date:{year:a.year,month:a.month,day:a.day},startTime:t,endTime:s};if(N(y,i)){p("This time slot overlaps with an existing event");return}await k(i)};return(0,i.jsxs)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",children:[b&&(0,i.jsx)(c.Z,{message:b}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[(0,i.jsx)("div",{className:"fixed inset-0"}),(0,i.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,i.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,i.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,i.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-indigo-700 px-4 py-6 sm:px-6 flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-base font-semibold leading-6 text-white",id:"slide-over-title",children:"New Event"}),(0,i.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,i.jsxs)("button",{onClick:j,type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",children:[(0,i.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,i.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),(0,i.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,i.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,i.jsxs)("div",{className:"space-y-6 pb-5 pt-6",children:[(0,i.jsx)(d,{onChange:e=>{l(e)},value:a}),(0,i.jsx)(w,{onChange:e=>{x(e.target.value)},name:"Start Time",value:o}),(0,i.jsx)(w,{onChange:e=>{f(e.target.value)},name:"End Time",value:h})]})})})]}),(0,i.jsxs)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:[(0,i.jsx)("button",{onClick:j,type:"button",className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,i.jsx)("button",{onClick:T,type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})})})})]})})]})}function h(e){let{setShowOverlay:t}=e,{user:s,updatePrice:a,updateNickname:l,updateDescription:o}=(0,r.a)(),[d,m]=(0,n.useState)(s.nickname),[u,x]=(0,n.useState)(s.description),[h,f]=(0,n.useState)(s.pricing),[g,y]=(0,n.useState)(""),v=async e=>{e.preventDefault();try{await Promise.all([l(d),o(u),a(h)]),console.log("Profile updated successfully"),t(!1)}catch(e){console.error("Error updating profile:",e),y("Failed to update profile: ".concat(e.message))}};return(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",children:(0,i.jsxs)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:[g&&(0,i.jsx)(c.Z,{message:g}),(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,i.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:"Edit Profile"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nickname"}),(0,i.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,i.jsx)("textarea",{value:u,onChange:e=>x(e.target.value),rows:4,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pricing ($ per hour)"}),(0,i.jsx)("input",{type:"number",value:h,onChange:e=>f(Number(e.target.value)),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:outline-none"})]})]}),(0,i.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[(0,i.jsx)("button",{type:"button",onClick:v,className:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 sm:col-start-2",children:"Save"}),(0,i.jsx)("button",{type:"button",onClick:()=>{t(!1)},className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",children:"Cancel"})]})]})})]})})}function f(){let{user:e,availability:t,updateAvailability:s}=(0,r.a)(),[d,m]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!0),{loading:v}=(0,r.a)(),[b,p]=(0,n.useState)(),j=async(e,i,a)=>{if(window.confirm("Do you want to remove this time slot?"))try{let l=t.filter(t=>{let s=new Date(t.date.year,t.date.month-1,t.date.day).getDay();return!((0===s?7:s)===e&&t.startTime===i&&t.endTime===a)});console.log("Original availability:",t),console.log("Updated availability:",l),await s(l),console.log("Event removed successfully")}catch(e){console.error("Error removing event:",e),p("Failed to remove event: ".concat(e.message))}};return((0,n.useEffect)(()=>{let t=async()=>{if(null==e?void 0:e.uid)try{var t;let i=(0,a.JU)(l.db,"users",e.uid),n=await (0,a.QT)(i),r=(null===(t=n.data())||void 0===t?void 0:t.availability)||[];s(r)}catch(e){console.error("Error fetching availability:",e)}finally{y(!1)}};v||t()},[e,v]),v||g)?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Loading..."})}):e?(0,i.jsxs)("div",{children:[b&&(0,i.jsx)(c.Z,{message:b}),(0,i.jsxs)("h2",{children:["Hi, ",e.nickname]}),(0,i.jsx)("h1",{children:"Who's ready to maximise shareholder value?"}),(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsx)(()=>(0,i.jsxs)("header",{className:"flex flex-none items-center justify-between border-b border-gray-200 px-6 py-4",children:[(0,i.jsx)("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:(0,i.jsxs)("time",{dateTime:"2022-01",children:[new Date().toLocaleString("default",{month:"long"})," ",new Date().getFullYear()]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:()=>f(!0),type:"button",className:"standard-button",children:"Profile"}),(0,i.jsx)("button",{onClick:()=>m(!0),type:"button",className:"standard-button",children:"Add event"})]})]}),{}),(0,i.jsx)(o.Z,{availability:t,userType:"teacher",handleClickEvent:j}),d&&(0,i.jsx)(x,{setShowOverlay:m}),u&&(0,i.jsx)(h,{setShowOverlay:f})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Please sign in to access this page"})})}}},function(e){e.O(0,[301,83,649,195,971,117,744],function(){return e(e.s=259)}),_N_E=e.O()}]);