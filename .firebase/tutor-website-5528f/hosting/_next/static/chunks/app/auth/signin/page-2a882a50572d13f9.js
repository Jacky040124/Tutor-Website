(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{9779:function(e,t,r){Promise.resolve().then(r.bind(r,3744))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var i=r(2972),n=r.n(i)},3744:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var i=r(7437),n=r(2265),s=r(4353),a=r(8858),l=r(4693),o=r(9271),u=r(5475),c=r(7648),d=r(8931),f=r(6554),b=r(2894);function m(){let[e,t]=(0,n.useState)(""),[r,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),x=(0,u.useRouter)(),{user:g,setUser:v}=(0,l.a)(),y=async t=>{t.preventDefault();try{let t=await (0,o.e5)(a.I8,e,r);console.log("Sign-in successful:",t.user.uid);let i=(0,s.JU)(a.db,"users",t.user.uid),n=await (0,s.QT)(i);if(!n.exists()){p("User data not found");return}let l=n.data();console.log("User data from Firestore:",l),"teacher"===l.type?v({email:t.user.email,uid:t.user.uid,type:l.type,nickname:l.nickname,description:l.description,availability:l.availability,pricing:l.pricing}):"student"===l.type&&v({email:t.user.email,uid:t.user.uid,type:l.type,nickname:l.nickname,balance:l.balance,bookingHistory:l.bookingHistory}),"teacher"===l.type?x.replace("/dashboard/user/teacher"):"student"===l.type&&x.replace("/dashboard/user/student")}catch(e){console.error("Sign-in error:",e),p(e.message||"Sign in failed")}};return(0,i.jsxs)("div",{className:"flex min-h-screen",children:[(0,i.jsxs)("div",{className:"w-1/2 flex flex-col px-8 lg:px-12 xl:px-16",children:[(0,i.jsx)("div",{className:"absolute top-4 left-4",children:(0,i.jsx)(c.default,{href:"/","aria-label":"Home",children:(0,i.jsx)(d.z,{variant:"outline",color:"slate",children:"← Back to home"})})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col justify-center max-w-md mx-auto w-full",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold",children:"Sign in to your account"}),(0,i.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Don't have an account?"," ",(0,i.jsx)(c.default,{href:"/auth/signup",className:"font-medium text-green-600 hover:text-green-500",children:"Sign up"})," ","for a free trial."]})]}),(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,i.jsx)(f.n,{label:"Email address",name:"email",type:"email",autoComplete:"email",onChange:e=>t(e.target.value),required:!0}),(0,i.jsx)(f.n,{label:"Password",name:"password",type:"password",autoComplete:"current-password",onChange:e=>m(e.target.value),required:!0}),h&&(0,i.jsx)(b.Z,{message:h}),(0,i.jsx)("div",{children:(0,i.jsx)(d.z,{type:"submit",variant:"solid",color:"blue",className:"w-full flex justify-center bg-green-600 hover:bg-green-700",children:"Sign in →"})})]})})]})]}),(0,i.jsx)("div",{className:"hidden lg:block w-1/2 bg-green-600 relative",children:(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-white p-12",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Welcome Back!"}),(0,i.jsx)("p",{className:"text-xl text-center max-w-md",children:"Connect with the best tutors and continue your learning journey today."})]})})]})}},8931:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var i=r(7437),n=r(7648),s=function(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i)}return n}(e))&&(i&&(i+=" "),i+=t);return i};let a={solid:"group inline-flex items-center justify-center rounded-full py-2 px-4 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2",outline:"group inline-flex ring-1 items-center justify-center rounded-full py-2 px-4 text-sm focus:outline-none"},l={solid:{slate:"bg-slate-900 text-white hover:bg-slate-700 hover:text-slate-100 active:bg-slate-800 active:text-slate-300 focus-visible:outline-slate-900",blue:"bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600",white:"bg-white text-slate-900 hover:bg-blue-50 active:bg-blue-200 active:text-slate-600 focus-visible:outline-white"},outline:{slate:"ring-slate-200 text-slate-700 hover:text-slate-900 hover:ring-slate-300 active:bg-slate-100 active:text-slate-600 focus-visible:outline-blue-600 focus-visible:ring-slate-300",white:"ring-slate-700 text-white hover:ring-slate-500 active:ring-slate-700 active:text-slate-400 focus-visible:outline-white"}};function o(e){let{variant:t,color:r,className:o,...u}=e;return r=null!=r?r:"slate",o=s(a[t=null!=t?t:"solid"],l[t][r],o),void 0===u.href?(0,i.jsx)("button",{className:o,...u}):(0,i.jsx)(n.default,{className:o,...u})}},2894:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var i=r(7437);function n(e){let{message:t}=e;return t?(0,i.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,i.jsx)("span",{className:"block sm:inline",children:t})]}):null}},6554:function(e,t,r){"use strict";r.d(t,{n:function(){return a}});var i=r(7437),n=r(2265);function s(e){let{id:t,children:r}=e;return(0,i.jsx)("label",{htmlFor:t,className:"mb-3 block text-sm font-medium text-gray-700",children:r})}function a(e){let{label:t,type:r="text",className:a,...l}=e,o=(0,n.useId)();return(0,i.jsxs)("div",{className:a,children:[t&&(0,i.jsx)(s,{id:o,children:t}),(0,i.jsx)("input",{id:o,type:r,...l,className:"block w-full appearance-none rounded-md border border-gray-200 bg-gray-50 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:bg-white focus:outline-none focus:ring-blue-500 sm:text-sm"})]})}},4693:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return o},a:function(){return u}});var i=r(7437),n=r(2265),s=r(9271),a=r(8858);let l=(0,n.createContext)();function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[u,c]=(0,n.useState)(!0),[d,f]=(0,n.useState)([]),[b,m]=(0,n.useState)({}),[h,p]=(0,n.useState)("");(0,n.useEffect)(()=>{console.log("UserContext mount");let e=(0,s.Aj)(a.I8,async e=>{if(console.log("Auth state changed:",null==e?void 0:e.uid),e)try{let t=(0,a.JU)(a.db,"users",e.uid),r=(await (0,a.QT)(t)).data();"teacher"===r.type?o({email:e.email,uid:e.uid,type:r.type,nickname:r.nickname,description:r.description,availability:r.availability,pricing:r.pricing}):"student"===r.type&&o({email:e.email,uid:e.uid,type:r.type,nickname:r.nickname,balance:r.balance,bookingHistory:r.bookingHistory})}catch(e){console.error("Error fetching user data:",e)}else o(null);c(!1)});return()=>e()},[]);let x=async(e,t)=>{try{let r=await (0,s.e5)(a.I8,e,t),i=(0,a.JU)(a.db,"users",r.user.uid),n=(await (0,a.QT)(i)).data();return o({email:r.user.email,uid:r.user.uid,type:null==n?void 0:n.type}),f((null==n?void 0:n.availability)||[]),{success:!0,userData:n}}catch(e){return console.error("Error signing in:",e),{success:!1,error:e}}},g=async e=>{if(null==r?void 0:r.uid)try{let t=(0,a.JU)(a.db,"users",r.uid);await (0,a.pl)(t,{availability:e},{merge:!0}),f(e)}catch(e){throw console.error("Error updating availability:",e),e}},v=async e=>{if(null==r?void 0:r.uid)try{let t=(0,a.JU)(a.db,"users",r.uid);await (0,a.pl)(t,{pricing:e},{merge:!0}),o(t=>({...t,pricing:e}))}catch(e){throw console.error("Error updating price:",e),e}},y=async e=>{if(null==r?void 0:r.uid)try{let t=(0,a.JU)(a.db,"users",r.uid);await (0,a.pl)(t,{nickname:e},{merge:!0}),o(t=>({...t,nickname:e}))}catch(e){throw console.error("Error updating nickname:",e),e}},w=async e=>{if(null==r?void 0:r.uid)try{let t=(0,a.JU)(a.db,"users",r.uid);await (0,a.pl)(t,{description:e},{merge:!0}),o(t=>({...t,description:e}))}catch(e){throw console.error("Error updating description:",e),e}},j=async e=>{if(null==r?void 0:r.uid)try{o(t=>({...t,balance:e}))}catch(e){throw console.error("Error updating user balance:",e),e}},k=async()=>{let e={};return(await (0,a.PL)((0,a.hJ)(a.db,"users"))).forEach(t=>{let r=t.data();"teacher"===r.type&&(e[r.uid]=r)}),m(e),e};return(0,i.jsx)(l.Provider,{value:{user:r,setUser:o,loading:u,availability:d,updateAvailability:g,signIn:x,teacherList:b,fetchTeachers:k,updatePrice:v,updateNickname:y,updateDescription:w,selectedTeacher:h,setSelectedTeacher:p,updateUserBalance:j},children:t})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},8858:function(e,t,r){"use strict";r.d(t,{I8:function(){return o},JU:function(){return i.JU},PL:function(){return i.PL},QT:function(){return i.QT},db:function(){return l},hJ:function(){return i.hJ},pl:function(){return i.pl}});var i=r(4353),n=r(2848),s=r(9271);let a=(0,n.ZF)({apiKey:"AIzaSyDdKApKZNEERKmPLfB8SxlGsJRTZV5ALvc",authDomain:"tutor-website-5528f.firebaseapp.com",projectId:"tutor-website-5528f",storageBucket:"tutor-website-5528f.appspot.com",messagingSenderId:"320690040214",appId:"1:320690040214:web:fde29b5326692c27e981b7",measurementId:"G-J0MZ8W9SSG"}),l=(0,i.ad)(a),o=(0,s.v0)(a)}},function(e){e.O(0,[301,83,649,972,971,117,744],function(){return e(e.s=9779)}),_N_E=e.O()}]);