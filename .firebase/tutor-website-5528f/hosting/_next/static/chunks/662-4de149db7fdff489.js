(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{5956:function(e,i,s){"use strict";s.d(i,{I8:function(){return d},JU:function(){return l.JU},PL:function(){return l.PL},QT:function(){return l.QT},db:function(){return a},hJ:function(){return l.hJ},pl:function(){return l.pl}});var t=s(2848),l=s(4353),n=s(9271);let r=(0,t.ZF)({apiKey:"AIzaSyDdKApKZNEERKmPLfB8SxlGsJRTZV5ALvc",authDomain:"tutor-website-5528f.firebaseapp.com",projectId:"tutor-website-5528f",storageBucket:"tutor-website-5528f.appspot.com",messagingSenderId:"320690040214",appId:"1:320690040214:web:fde29b5326692c27e981b7",measurementId:"G-J0MZ8W9SSG"}),a=(0,l.ad)(r),d=(0,n.v0)(r)},662:function(e,i,s){"use strict";s.d(i,{Z:function(){return n}});var t=s(7437);s(2778),s(3621),s(5956),s(3881);var l=s(2265);function n(e){let{availability:i,handleClickEvent:s}=e,[n,r]=(0,l.useState)(0);console.log("calendar availability:"+i);let a=new Date().getDate(),d=e=>{let{day:i,startTime:l,endTime:n}=e,r=12*l+2,a=(n-l)*12;return console.log("day:"+i,"startTime:"+l,"endTime:"+n),(0,t.jsx)("li",{className:"relative mt-px hidden ".concat({1:"sm:col-start-1",2:"sm:col-start-2",3:"sm:col-start-3",4:"sm:col-start-4",5:"sm:col-start-5",6:"sm:col-start-6",7:"sm:col-start-7"}[i]," sm:flex"),style:{gridRow:"".concat(r," / span ").concat(a)},children:(0,t.jsx)("a",{onClick:()=>s(i,l,n),className:"group absolute inset-1 flex flex-col overflow-y-auto rounded-lg bg-green-100 p-2 text-xs leading-5 hover:bg-green-200",children:(0,t.jsx)("p",{className:"text-gray-500 group-hover:text-gray-700",children:(0,t.jsxs)("time",{dateTime:"2022-01-15T".concat(l,":00"),children:[l,":00"]})})})})};return(0,t.jsx)("div",{className:"flex h-full flex-col",children:(0,t.jsx)("div",{className:"isolate flex flex-auto flex-col overflow-auto bg-white",children:(0,t.jsxs)("div",{className:"flex max-w-full flex-none flex-col sm:max-w-none md:max-w-full",style:{width:"165%"},children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("button",{onClick:()=>{r(e=>e-1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous Week"}),(0,t.jsx)("button",{onClick:()=>{r(e=>e+1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next Week"})]}),(0,t.jsx)(()=>{let e=(e=>{let i=new Date(e);i.setDate(i.getDate()+7*n);let s=i.getDay(),t=i.getDate()-s+(0===s?-6:1);return new Date(i.setDate(t))})(new Date),i=[...Array(7)].map((i,s)=>{let t=new Date(e);return t.setDate(e.getDate()+s),t.getDate()});return(0,t.jsxs)("div",{className:"sticky top-0 z-30 flex-none bg-white shadow ring-1 ring-black ring-opacity-5 sm:pr-8",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 text-sm leading-6 text-gray-500 sm:hidden",children:["M","T","W","T","F","S","S"].map((e,s)=>(0,t.jsxs)("button",{type:"button",className:"flex flex-col items-center pb-3 pt-2",children:[e,(0,t.jsx)("span",{className:"mt-1 flex h-8 w-8 items-center justify-center font-semibold ".concat(i[s]===a?"rounded-full bg-indigo-600 text-white":"text-gray-900"),children:i[s]})]},s))}),(0,t.jsxs)("div",{className:"-mr-px hidden grid-cols-7 divide-x divide-gray-100 border-r border-gray-100 text-sm leading-6 text-gray-500 sm:grid",children:[(0,t.jsx)("div",{className:"col-end-1 w-14"}),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,s)=>(0,t.jsx)("div",{className:"flex items-center justify-center py-3",children:(0,t.jsxs)("span",{className:"flex items-baseline",children:[e,(0,t.jsx)("span",{className:"ml-1.5 ".concat(i[s]===a?"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 font-semibold text-white":"items-center justify-center font-semibold text-gray-900"),children:i[s]})]})},s))]})]})},{}),(0,t.jsxs)("div",{className:"flex flex-auto",children:[(0,t.jsx)("div",{className:"sticky left-0 z-10 w-14 flex-none bg-white ring-1 ring-gray-100"}),(0,t.jsxs)("div",{className:"grid flex-auto grid-cols-1 grid-rows-1",children:[(0,t.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 grid divide-y divide-gray-100",style:{gridTemplateRows:"repeat(48, minmax(3.5rem, 1fr))"},children:[(0,t.jsx)("div",{className:"row-end-1 h-7"}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"12AM"})," "]}),(0,t.jsx)("div",{children:" "}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"1AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"2AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"3AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"4AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"5AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"6AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"7AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"8AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"9AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"10AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"11AM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"12PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"1PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"2PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"3PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"4PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"5PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"6PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"7PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"8PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"9PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"10PM"})," "]}),(0,t.jsx)("div",{}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)("div",{className:"calendarText",children:"11PM"})," "]}),(0,t.jsx)("div",{})]}),(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 hidden grid-cols-7 grid-rows-1 divide-x divide-gray-100 sm:grid sm:grid-cols-7",children:[(0,t.jsx)("div",{className:"col-start-1 row-span-full"}),(0,t.jsx)("div",{className:"col-start-2 row-span-full"}),(0,t.jsx)("div",{className:"col-start-3 row-span-full"}),(0,t.jsx)("div",{className:"col-start-4 row-span-full"}),(0,t.jsx)("div",{className:"col-start-5 row-span-full"}),(0,t.jsx)("div",{className:"col-start-6 row-span-full"}),(0,t.jsx)("div",{className:"col-start-7 row-span-full"}),(0,t.jsx)("div",{className:"col-start-8 row-span-full w-8"})]}),{}),(0,t.jsx)(()=>{if(!i)return null;console.log("calendar availability:"+i);let{monday:e,sunday:s}=(()=>{let e=new Date;e.setDate(e.getDate()+7*n);let i=new Date(e),s=i.getDay();i.setDate(i.getDate()+(0===s?-6:1-s));let t=new Date(i);return t.setDate(i.getDate()+6),{monday:i,sunday:t}})(),l=i.map((i,l)=>{var n,r,a;if(!(null==i?void 0:null===(n=i.date)||void 0===n?void 0:n.year)||!(null==i?void 0:null===(r=i.date)||void 0===r?void 0:r.month)||!(null==i?void 0:null===(a=i.date)||void 0===a?void 0:a.day))return console.error("Invalid event date format:",i),null;let c=new Date(i.date.year,i.date.month-1,i.date.day);c.setHours(0,0,0,0);let o=new Date(e);o.setHours(0,0,0,0);let x=new Date(s);if(x.setHours(0,0,0,0),c>=o&&c<=x){let e=c.getDay();return(0,t.jsx)(d,{day:0===e?7:e,endTime:i.endTime,startTime:i.startTime},l)}return null}).filter(Boolean);return(0,t.jsx)("ol",{className:"col-start-1 col-end-2 row-start-1 grid grid-cols-1 sm:grid-cols-7 sm:pr-8",style:{gridTemplateRows:"1.75rem repeat(288, minmax(0, 1fr)) auto"},children:l})},{})]})]})]})})})}},3621:function(e,i,s){"use strict";s.d(i,{Z:function(){return d}});var t=s(7437),l=s(2265),n=s(3881),r=e=>{let{value:i,onChange:s}=e,[n,r]=(0,l.useState)(!1),[a,d]=(0,l.useState)([]);(0,l.useEffect)(()=>{d((()=>{let e=[],i=new Date;for(let s=0;s<7;s++){let t=new Date(i);t.setDate(i.getDate()+s),e.push({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),displayText:t.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})}return e})())},[]);let c=e=>{s({day:e.day,month:e.month,year:e.year,displayText:e.displayText}),r(!1)};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>r(!n),className:"w-full text-left",children:i?i.displayText:"Select day"}),n&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded shadow-lg",children:a.map(e=>(0,t.jsx)("div",{onClick:()=>c(e),className:"px-4 py-2 cursor-pointer hover:bg-gray-100",children:e.displayText},"".concat(e.year,"-").concat(e.month,"-").concat(e.day)))})]})};let a=e=>{if(!e)return null;let[i,s]=e.split(":").map(Number);return i+s/60};function d(e){let{setShowOverlay:i,onEventAdded:s}=e,[d,c]=(0,l.useState)(null),[o,x]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),{user:h,availability:j,updateAvailability:v}=(0,n.a)(),p=()=>{i(!1)},g=e=>{let{name:i,onChange:s,value:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"time",className:"block text-sm font-medium leading-6 text-gray-900",children:[" ",i," "]}),(0,t.jsxs)("select",{onChange:s,value:l,id:"time",name:"time",className:"mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,t.jsx)("option",{children:"Select Time"}),(0,t.jsx)("option",{children:"00:00"}),(0,t.jsx)("option",{children:"00:30"}),(0,t.jsx)("option",{children:"01:00"}),(0,t.jsx)("option",{children:"01:30"}),(0,t.jsx)("option",{children:"02:00"}),(0,t.jsx)("option",{children:"02:30"}),(0,t.jsx)("option",{children:"03:00"}),(0,t.jsx)("option",{children:"03:30"}),(0,t.jsx)("option",{children:"04:00"}),(0,t.jsx)("option",{children:"04:30"}),(0,t.jsx)("option",{children:"05:00"}),(0,t.jsx)("option",{children:"05:30"}),(0,t.jsx)("option",{children:"06:00"}),(0,t.jsx)("option",{children:"06:30"}),(0,t.jsx)("option",{children:"07:00"}),(0,t.jsx)("option",{children:"07:30"}),(0,t.jsx)("option",{children:"08:00"}),(0,t.jsx)("option",{children:"08:30"}),(0,t.jsx)("option",{children:"09:00"}),(0,t.jsx)("option",{children:"09:30"}),(0,t.jsx)("option",{children:"10:00"}),(0,t.jsx)("option",{children:"10:30"}),(0,t.jsx)("option",{children:"11:00"}),(0,t.jsx)("option",{children:"11:30"}),(0,t.jsx)("option",{children:"12:00"}),(0,t.jsx)("option",{children:"12:30"}),(0,t.jsx)("option",{children:"13:00"}),(0,t.jsx)("option",{children:"13:30"}),(0,t.jsx)("option",{children:"14:00"}),(0,t.jsx)("option",{children:"14:30"}),(0,t.jsx)("option",{children:"15:00"}),(0,t.jsx)("option",{children:"15:30"}),(0,t.jsx)("option",{children:"16:00"}),(0,t.jsx)("option",{children:"16:30"}),(0,t.jsx)("option",{children:"17:00"}),(0,t.jsx)("option",{children:"17:30"}),(0,t.jsx)("option",{children:"18:00"}),(0,t.jsx)("option",{children:"18:30"}),(0,t.jsx)("option",{children:"19:00"}),(0,t.jsx)("option",{children:"19:30"}),(0,t.jsx)("option",{children:"20:00"}),(0,t.jsx)("option",{children:"20:30"}),(0,t.jsx)("option",{children:"21:00"}),(0,t.jsx)("option",{children:"21:30"}),(0,t.jsx)("option",{children:"22:00"}),(0,t.jsx)("option",{children:"22:30"}),(0,t.jsx)("option",{children:"23:00"}),(0,t.jsx)("option",{children:"23:30"})]})]})},f=async e=>{e.preventDefault();let t=a(o),l=a(u);if(d&&o&&u){if(t>=l){alert("endTime Must be later than startTime");return}}else{console.error("Missing required fields:",{date:d,start:o,end:u}),alert("Please fill in all fields");return}let n={date:{year:d.year,month:d.month,day:d.day},startTime:t,endTime:l};for(let e=0;e<j.length;e++){let i=j[e];if(i.date.year===n.date.year&&i.date.month===n.date.month&&i.date.day===n.date.day&&(n.startTime>=i.startTime&&n.startTime<i.endTime||n.endTime>i.startTime&&n.endTime<=i.endTime||n.startTime<=i.startTime&&n.endTime>=i.endTime)){alert("This time slot overlaps with an existing event");return}}if(null==h?void 0:h.uid)try{let e=[...j,n];await v(e),s&&s(),i(!1)}catch(e){console.error("Error saving event:",e),alert("Error saving event. Please try again.")}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[(0,t.jsx)("div",{className:"fixed inset-0"}),(0,t.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,t.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,t.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,t.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,t.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,t.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"bg-indigo-700 px-4 py-6 sm:px-6 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-base font-semibold leading-6 text-white",id:"slide-over-title",children:"New Event"}),(0,t.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,t.jsxs)("button",{onClick:p,type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,t.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"space-y-6 pb-5 pt-6",children:[(0,t.jsx)(r,{onChange:e=>{c(e)},value:d}),(0,t.jsx)(g,{onChange:e=>{x(e.target.value)},name:"Start Time",value:o}),(0,t.jsx)(g,{onChange:e=>{m(e.target.value)},name:"End Time",value:u})]})})})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:[(0,t.jsx)("button",{onClick:p,type:"button",className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:f,type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})})})})]})})}},3881:function(e,i,s){"use strict";s.d(i,{UserProvider:function(){return d},a:function(){return c}});var t=s(7437),l=s(2265),n=s(9271),r=s(5956);let a=(0,l.createContext)();function d(e){let{children:i}=e,[s,d]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0),[x,u]=(0,l.useState)([]),[m,h]=(0,l.useState)({});(0,l.useEffect)(()=>{console.log("UserContext mount");let e=(0,n.Aj)(r.I8,async e=>{if(console.log("Auth state changed:",null==e?void 0:e.uid),e)try{let i=(0,r.JU)(r.db,"users",e.uid),s=(await (0,r.QT)(i)).data();"teacher"===s.type?d({email:e.email,uid:e.uid,type:s.type,nickname:s.nickname,description:s.description,availability:s.availability,pricing:s.pricing}):"student"===s.type&&d({email:e.email,uid:e.uid,type:s.type,nickname:s.nickname,balance:s.balance,bookingHistory:s.bookingHistory})}catch(e){console.error("Error fetching user data:",e)}else d(null);o(!1)});return()=>e()},[]);let j=async(e,i)=>{try{let s=await (0,n.e5)(r.I8,e,i),t=(0,r.JU)(r.db,"users",s.user.uid),l=(await (0,r.QT)(t)).data();return d({email:s.user.email,uid:s.user.uid,type:null==l?void 0:l.type}),u((null==l?void 0:l.availability)||[]),{success:!0,userData:l}}catch(e){return console.error("Error signing in:",e),{success:!1,error:e}}},v=async e=>{if(null==s?void 0:s.uid)try{let i=(0,r.JU)(r.db,"users",s.uid);await (0,r.pl)(i,{availability:e},{merge:!0}),u(e)}catch(e){throw console.error("Error updating availability:",e),e}},p=async e=>{if(null==s?void 0:s.uid)try{let i=(0,r.JU)(r.db,"users",s.uid);await (0,r.pl)(i,{pricing:e},{merge:!0}),d(i=>({...i,pricing:e}))}catch(e){throw console.error("Error updating price:",e),e}},g=async e=>{if(null==s?void 0:s.uid)try{let i=(0,r.JU)(r.db,"users",s.uid);await (0,r.pl)(i,{nickname:e},{merge:!0}),d(i=>({...i,nickname:e}))}catch(e){throw console.error("Error updating nickname:",e),e}},f=async e=>{if(null==s?void 0:s.uid)try{let i=(0,r.JU)(r.db,"users",s.uid);await (0,r.pl)(i,{description:e},{merge:!0}),d(i=>({...i,description:e}))}catch(e){throw console.error("Error updating description:",e),e}},y=async()=>{let e={};return(await (0,r.PL)((0,r.hJ)(r.db,"users"))).forEach(i=>{let s=i.data();"teacher"===s.type&&(e[s.email]=s)}),h(e),e};return(0,t.jsx)(a.Provider,{value:{user:s,setUser:d,loading:c,availability:x,updateAvailability:v,signIn:j,teacherList:m,fetchTeachers:y,updatePrice:p,updateNickname:g,updateDescription:f},children:i})}function c(){let e=(0,l.useContext)(a);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},2778:function(){}}]);