(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{5956:function(e,s,t){"use strict";t.d(s,{I8:function(){return d},JU:function(){return l.JU},PL:function(){return l.PL},QT:function(){return l.QT},db:function(){return r},hJ:function(){return l.hJ},pl:function(){return l.pl}});var i=t(2848),l=t(4353),n=t(9271);let a=(0,i.ZF)({apiKey:"AIzaSyDdKApKZNEERKmPLfB8SxlGsJRTZV5ALvc",authDomain:"tutor-website-5528f.firebaseapp.com",projectId:"tutor-website-5528f",storageBucket:"tutor-website-5528f.appspot.com",messagingSenderId:"320690040214",appId:"1:320690040214:web:fde29b5326692c27e981b7",measurementId:"G-J0MZ8W9SSG"}),r=(0,l.ad)(a),d=(0,n.v0)(a)},662:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var i=t(7437);t(2778),t(3621),t(5956),t(3881);var l=t(2265);function n(e){let{availability:s,updateAvailability:t}=e,[n,a]=(0,l.useState)(0);console.log("calendar availability:"+s);let r=new Date().getDate(),d=e=>{let{day:s,startTime:t,endTime:l}=e,n=12*t+2;return console.log("day:"+s,"startTime:"+t,"endTime:"+l),(0,i.jsx)("li",{className:"relative mt-px hidden ".concat({1:"sm:col-start-1",2:"sm:col-start-2",3:"sm:col-start-3",4:"sm:col-start-4",5:"sm:col-start-5",6:"sm:col-start-6",7:"sm:col-start-7"}[s]," sm:flex"),style:{gridRow:"".concat(n," / span ").concat((l-t)*12)},children:(0,i.jsx)("a",{className:"group absolute inset-1 flex flex-col overflow-y-auto rounded-lg bg-green-100 p-2 text-xs leading-5 hover:bg-green-200",children:(0,i.jsx)("p",{className:"text-gray-500 group-hover:text-gray-700",children:(0,i.jsxs)("time",{dateTime:"2022-01-15T".concat(t,":00"),children:[t,":00"]})})})})};return(0,i.jsx)("div",{className:"flex h-full flex-col",children:(0,i.jsx)("div",{className:"isolate flex flex-auto flex-col overflow-auto bg-white",children:(0,i.jsxs)("div",{className:"flex max-w-full flex-none flex-col sm:max-w-none md:max-w-full",style:{width:"165%"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("button",{onClick:()=>{a(e=>e-1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous Week"}),(0,i.jsx)("button",{onClick:()=>{a(e=>e+1)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next Week"})]}),(0,i.jsx)(()=>{let e=(e=>{let s=new Date(e);s.setDate(s.getDate()+7*n);let t=s.getDay(),i=s.getDate()-t+(0===t?-6:1);return new Date(s.setDate(i))})(new Date),s=[...Array(7)].map((s,t)=>{let i=new Date(e);return i.setDate(e.getDate()+t),i.getDate()});return(0,i.jsxs)("div",{className:"sticky top-0 z-30 flex-none bg-white shadow ring-1 ring-black ring-opacity-5 sm:pr-8",children:[(0,i.jsx)("div",{className:"grid grid-cols-7 text-sm leading-6 text-gray-500 sm:hidden",children:["M","T","W","T","F","S","S"].map((e,t)=>(0,i.jsxs)("button",{type:"button",className:"flex flex-col items-center pb-3 pt-2",children:[e,(0,i.jsx)("span",{className:"mt-1 flex h-8 w-8 items-center justify-center font-semibold ".concat(s[t]===r?"rounded-full bg-indigo-600 text-white":"text-gray-900"),children:s[t]})]},t))}),(0,i.jsxs)("div",{className:"-mr-px hidden grid-cols-7 divide-x divide-gray-100 border-r border-gray-100 text-sm leading-6 text-gray-500 sm:grid",children:[(0,i.jsx)("div",{className:"col-end-1 w-14"}),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,t)=>(0,i.jsx)("div",{className:"flex items-center justify-center py-3",children:(0,i.jsxs)("span",{className:"flex items-baseline",children:[e,(0,i.jsx)("span",{className:"ml-1.5 ".concat(s[t]===r?"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 font-semibold text-white":"items-center justify-center font-semibold text-gray-900"),children:s[t]})]})},t))]})]})},{}),(0,i.jsxs)("div",{className:"flex flex-auto",children:[(0,i.jsx)("div",{className:"sticky left-0 z-10 w-14 flex-none bg-white ring-1 ring-gray-100"}),(0,i.jsxs)("div",{className:"grid flex-auto grid-cols-1 grid-rows-1",children:[(0,i.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 grid divide-y divide-gray-100",style:{gridTemplateRows:"repeat(48, minmax(3.5rem, 1fr))"},children:[(0,i.jsx)("div",{className:"row-end-1 h-7"}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"12AM"})," "]}),(0,i.jsx)("div",{children:" "}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"1AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"2AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"3AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"4AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"5AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"6AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"7AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"8AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"9AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"10AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"11AM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"12PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"1PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"2PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"3PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"4PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"5PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"6PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"7PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"8PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"9PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"10PM"})," "]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"calendarText",children:"11PM"})," "]}),(0,i.jsx)("div",{})]}),(0,i.jsx)(()=>(0,i.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 hidden grid-cols-7 grid-rows-1 divide-x divide-gray-100 sm:grid sm:grid-cols-7",children:[(0,i.jsx)("div",{className:"col-start-1 row-span-full"}),(0,i.jsx)("div",{className:"col-start-2 row-span-full"}),(0,i.jsx)("div",{className:"col-start-3 row-span-full"}),(0,i.jsx)("div",{className:"col-start-4 row-span-full"}),(0,i.jsx)("div",{className:"col-start-5 row-span-full"}),(0,i.jsx)("div",{className:"col-start-6 row-span-full"}),(0,i.jsx)("div",{className:"col-start-7 row-span-full"}),(0,i.jsx)("div",{className:"col-start-8 row-span-full w-8"})]}),{}),(0,i.jsx)(()=>{if(!s)return null;console.log("calendar availability:"+s);let{monday:e,sunday:t}=(()=>{let e=new Date;e.setDate(e.getDate()+7*n);let s=new Date(e),t=s.getDay();s.setDate(s.getDate()+(0===t?-6:1-t));let i=new Date(s);return i.setDate(s.getDate()+6),{monday:s,sunday:i}})(),l=s.map((s,l)=>{var n,a,r;if(!(null==s?void 0:null===(n=s.date)||void 0===n?void 0:n.year)||!(null==s?void 0:null===(a=s.date)||void 0===a?void 0:a.month)||!(null==s?void 0:null===(r=s.date)||void 0===r?void 0:r.day))return console.error("Invalid event date format:",s),null;let o=new Date(s.date.year,s.date.month-1,s.date.day);o.setHours(0,0,0,0);let c=new Date(e);c.setHours(0,0,0,0);let x=new Date(t);if(x.setHours(0,0,0,0),o>=c&&o<=x){let e=o.getDay();return(0,i.jsx)(d,{day:0===e?7:e,endTime:s.endTime,startTime:s.startTime},l)}return null}).filter(Boolean);return(0,i.jsx)("ol",{className:"col-start-1 col-end-2 row-start-1 grid grid-cols-1 sm:grid-cols-7 sm:pr-8",style:{gridTemplateRows:"1.75rem repeat(288, minmax(0, 1fr)) auto"},children:l})},{})]})]})]})})})}},3621:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var i=t(7437),l=t(2265),n=t(3881),a=e=>{let{value:s,onChange:t}=e,[n,a]=(0,l.useState)(!1),[r,d]=(0,l.useState)([]);(0,l.useEffect)(()=>{d((()=>{let e=[],s=new Date;for(let t=0;t<7;t++){let i=new Date(s);i.setDate(s.getDate()+t),e.push({day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear(),displayText:i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})}return e})())},[]);let o=e=>{t({day:e.day,month:e.month,year:e.year,displayText:e.displayText}),a(!1)};return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("button",{type:"button",onClick:()=>a(!n),className:"w-full text-left",children:s?s.displayText:"Select day"}),n&&(0,i.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded shadow-lg",children:r.map(e=>(0,i.jsx)("div",{onClick:()=>o(e),className:"px-4 py-2 cursor-pointer hover:bg-gray-100",children:e.displayText},"".concat(e.year,"-").concat(e.month,"-").concat(e.day)))})]})};let r=e=>{if(!e)return null;let[s,t]=e.split(":").map(Number);return s+t/60};function d(e){let{setShowOverlay:s,onEventAdded:t}=e,[d,o]=(0,l.useState)(null),[c,x]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),{user:u,availability:j,updateAvailability:v}=(0,n.a)(),p=()=>{s(!1)},f=e=>{let{name:s,onChange:t,value:l}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"time",className:"block text-sm font-medium leading-6 text-gray-900",children:[" ",s," "]}),(0,i.jsxs)("select",{onChange:t,value:l,id:"time",name:"time",className:"mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,i.jsx)("option",{children:"Select Time"}),(0,i.jsx)("option",{children:"00:00"}),(0,i.jsx)("option",{children:"00:30"}),(0,i.jsx)("option",{children:"01:00"}),(0,i.jsx)("option",{children:"01:30"}),(0,i.jsx)("option",{children:"02:00"}),(0,i.jsx)("option",{children:"02:30"}),(0,i.jsx)("option",{children:"03:00"}),(0,i.jsx)("option",{children:"03:30"}),(0,i.jsx)("option",{children:"04:00"}),(0,i.jsx)("option",{children:"04:30"}),(0,i.jsx)("option",{children:"05:00"}),(0,i.jsx)("option",{children:"05:30"}),(0,i.jsx)("option",{children:"06:00"}),(0,i.jsx)("option",{children:"06:30"}),(0,i.jsx)("option",{children:"07:00"}),(0,i.jsx)("option",{children:"07:30"}),(0,i.jsx)("option",{children:"08:00"}),(0,i.jsx)("option",{children:"08:30"}),(0,i.jsx)("option",{children:"09:00"}),(0,i.jsx)("option",{children:"09:30"}),(0,i.jsx)("option",{children:"10:00"}),(0,i.jsx)("option",{children:"10:30"}),(0,i.jsx)("option",{children:"11:00"}),(0,i.jsx)("option",{children:"11:30"}),(0,i.jsx)("option",{children:"12:00"}),(0,i.jsx)("option",{children:"12:30"}),(0,i.jsx)("option",{children:"13:00"}),(0,i.jsx)("option",{children:"13:30"}),(0,i.jsx)("option",{children:"14:00"}),(0,i.jsx)("option",{children:"14:30"}),(0,i.jsx)("option",{children:"15:00"}),(0,i.jsx)("option",{children:"15:30"}),(0,i.jsx)("option",{children:"16:00"}),(0,i.jsx)("option",{children:"16:30"}),(0,i.jsx)("option",{children:"17:00"}),(0,i.jsx)("option",{children:"17:30"}),(0,i.jsx)("option",{children:"18:00"}),(0,i.jsx)("option",{children:"18:30"}),(0,i.jsx)("option",{children:"19:00"}),(0,i.jsx)("option",{children:"19:30"}),(0,i.jsx)("option",{children:"20:00"}),(0,i.jsx)("option",{children:"20:30"}),(0,i.jsx)("option",{children:"21:00"}),(0,i.jsx)("option",{children:"21:30"}),(0,i.jsx)("option",{children:"22:00"}),(0,i.jsx)("option",{children:"22:30"}),(0,i.jsx)("option",{children:"23:00"}),(0,i.jsx)("option",{children:"23:30"})]})]})},g=async e=>{e.preventDefault();let i=r(c),l=r(h);if(d&&c&&h){if(i>=l){alert("endTime Must be later than startTime");return}}else{console.error("Missing required fields:",{date:d,start:c,end:h}),alert("Please fill in all fields");return}let n={date:{year:d.year,month:d.month,day:d.day},startTime:i,endTime:l};for(let e=0;e<j.length;e++){let s=j[e];if(s.date.year===n.date.year&&s.date.month===n.date.month&&s.date.day===n.date.day&&(n.startTime>=s.startTime&&n.startTime<s.endTime||n.endTime>s.startTime&&n.endTime<=s.endTime||n.startTime<=s.startTime&&n.endTime>=s.endTime)){alert("This time slot overlaps with an existing event");return}}if(null==u?void 0:u.uid)try{let e=[...j,n];await v(e),t&&t(),s(!1)}catch(e){console.error("Error saving event:",e),alert("Error saving event. Please try again.")}};return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[(0,i.jsx)("div",{className:"fixed inset-0"}),(0,i.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,i.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,i.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,i.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,i.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-indigo-700 px-4 py-6 sm:px-6 flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-base font-semibold leading-6 text-white",id:"slide-over-title",children:"New Event"}),(0,i.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,i.jsxs)("button",{onClick:p,type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",children:[(0,i.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,i.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),(0,i.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,i.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,i.jsxs)("div",{className:"space-y-6 pb-5 pt-6",children:[(0,i.jsx)(a,{onChange:e=>{o(e)},value:d}),(0,i.jsx)(f,{onChange:e=>{x(e.target.value)},name:"Start Time",value:c}),(0,i.jsx)(f,{onChange:e=>{m(e.target.value)},name:"End Time",value:h})]})})})]}),(0,i.jsxs)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:[(0,i.jsx)("button",{onClick:p,type:"button",className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,i.jsx)("button",{onClick:g,type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Save"})]})]})})})})})]})})}},3881:function(e,s,t){"use strict";t.d(s,{UserProvider:function(){return d},a:function(){return o}});var i=t(7437),l=t(2265),n=t(9271),a=t(5956);let r=(0,l.createContext)();function d(e){let{children:s}=e,[t,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0),[x,h]=(0,l.useState)([]),[m,u]=(0,l.useState)({});(0,l.useEffect)(()=>{console.log("UserContext mount");let e=(0,n.Aj)(a.I8,async e=>{if(console.log("Auth state changed:",null==e?void 0:e.uid),e)try{let s=(0,a.JU)(a.db,"users",e.uid),t=await (0,a.QT)(s);if(t.exists()){let s=t.data();d({uid:e.uid,email:e.email,type:s.type})}}catch(e){console.error("Error fetching user data:",e)}else d(null);c(!1)});return()=>e()},[]);let j=async(e,s)=>{try{let t=await (0,n.e5)(a.I8,e,s),i=(0,a.JU)(a.db,"users",t.user.uid),l=(await (0,a.QT)(i)).data();return d({email:t.user.email,uid:t.user.uid,type:null==l?void 0:l.type}),h((null==l?void 0:l.availability)||[]),{success:!0,userData:l}}catch(e){return console.error("Error signing in:",e),{success:!1,error:e}}},v=async e=>{if(null==t?void 0:t.uid)try{let s=(0,a.JU)(a.db,"users",t.uid);await (0,a.pl)(s,{availability:e},{merge:!0}),h(e)}catch(e){throw console.error("Error updating availability:",e),e}},p=async()=>{let e={};return(await (0,a.PL)((0,a.hJ)(a.db,"users"))).forEach(s=>{e[s.data().email]=s.data()}),u(e),e};return(0,i.jsx)(r.Provider,{value:{user:t,setUser:d,loading:o,availability:x,updateAvailability:v,signIn:j,teacherList:m,fetchTeachers:p},children:s})}function o(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},2778:function(){}}]);